<%- include('partials/header.ejs') %>

<main>
    <div class="req-container">
        <h2><%= username %></h2>

        <!-- enctype="multipart/form-data" is needed when form has file uploads -->
        <form action="/userRequests" method="POST" enctype="multipart/form-data">

            <!-- Genre input -->
            <label for="genre">Genre:</label>
            <input type="text" id="genre" name="genre" placeholder="Enter genre" required 
                   style="width: 100%; padding: 8px; margin-bottom: 10px;">

            <!-- Request textarea -->
            <textarea id="request" name="request" placeholder="MAKE YOUR REQUEST HERE..." required 
                      style="width: 100%; padding: 8px;"></textarea>

            <!-- Ask user if they want to upload image -->
            <div class="upload-toggle">
                <input type="checkbox" id="uploadCheck" style="margin: 0;">
                <label for="uploadCheck">
                    Do you want to upload an image?
                </label>
            </div>

            <!-- Hidden upload box -->
            <div class="image-upload" id="imageUploadBox" style="display:none; margin-top: 5px; position: relative;">
                <!-- Upload text (hidden once image is uploaded) -->
                <label for="book_image" id="uploadLabel" 
                       style="cursor: pointer; text-align:center; width:100%; height:100%; 
                              display:flex; align-items:center; justify-content:center;">
                    ðŸ“‚ Click to upload
                </label>

                <input type="file" id="book_image" name="book_image" accept="image/*" style="display:none;">
                <!-- Image preview -->
                <img id="previewImage" src="" alt="Preview" style="display:none; margin-top:10px; max-width:150px;">
            </div>

            <br />
            <button class="btn">REQUEST</button>
        </form>
    </div>
</main>

<%- include('partials/footer.ejs') %>
<script src="/js/app.js"></script>
